secrets:
  global:
    scopes:
      public:
        api:
          authUrl: '<%= ssl_helper('http') %>://<%= @config['app']['subdomain'] %>.<%= @config['app']['domain'] %>/api/v2/barong'
          tradeUrl: '<%= ssl_helper('http') %>://<%= @config['app']['subdomain'] %>.<%= @config['app']['domain'] %>/api/v2/peatio'
          finexUrl: '<%= ssl_helper('http') %>://<%= @config['app']['subdomain'] %>.<%= @config['app']['domain'] %>/api/v2/finex'
          applogicUrl: '<%= ssl_helper('http') %>://<%= @config['app']['subdomain'] %>.<%= @config['app']['domain'] %>/api/v2/applogic'
          rangerUrl: '<%= ssl_helper('ws') %>://<%= @config['app']['subdomain'] %>.<%= @config['app']['domain'] %>/api/v2/ranger'
        minutesUntilAutoLogout: '35'
        withCredentials: 'false'
        finex: 'false'
        gaTrackerKey: ''
        rangerReconnectPeriod: '1'
        msAlertDisplayTime: '5000'
        incrementalOrderBook: 'true'
        isResizable: 'false'
        isDraggable: 'false'
        languages: ['en', 'ru']
        sessionCheckInterval: '15000'
        balancesFetchInterval: '3000'
        captcha_type: <%= @config['captcha']['type'] %>
        password_min_enthropy: '14'
        passwordEntropyStep: '14'
        showLanding: 'true'
        sentryEnabled: 'false'
        kycSteps: [
          'email',
          'phone',
          'profile',
          'document',
          'address',
        ]
      private:
        database_host: <%=  @config['database']['host'] %>
        database_port: "<%=  @config['database']['port'] %>"
        database_user: <%=  @config['database']['user'] %>
        vault_app_name: opendax
        vault_address: http://vault:8200
        vault_addr: http://vault:8200
      secret:
        database_pass: <%= @config['database']['password'] %>

  barong:
    scopes:
      public: {}
      private:
        <%- if @config['database']['adapter'] == 'postgresql' -%>
        database_collation: ""
        database_adapter: postgresql
        <%- elsif @config['database']['adapter'] == 'mysql' -%>
        database_adapter: mysql2
        <%- end -%>
        log_level: warn
        disable_spring: 'true'
        barong_session_expire_time: '7200'
        port: '8081'
        rails_env: production
        barong_sender_email: <%= @config['smtp']['sender_email'] %>
        barong_smtp_user: <%= @config['smtp']['user'] %>
        barong_smtp_logo_link: <%= @config['smtp']['sender_logo'] %>
        barong_sender_name: <%= @config['smtp']['sender_name'] %>
        barong_default_language: en
        barong_kyc_provider: <%= @config['kyc']['provider'] %>
        barong_app_name: <%= @config['app']['name'] %>
        barong_uid_prefix: ID
        barong_sms_content_template: "Your verification code for OpenDAX: {{code}}"
        barong_required_docs_expire: 'false'
        barong_domain: <%= ssl_helper('http') %>://<%= @config['app']['subdomain'] %>.<%= @config['app']['domain'] %>
        <%- if @config['kyc']['provider'] == 'kycaid' -%>
        barong_kycaid_sandbox_mode: 'false'
        barong_kycaid_api_endpoint: <%= @config['kyc']['api_endpoint'] %>
        <%- end -%>
        barong_api_cors_origins: https://2-6-stable.openfinex.io
        barong_api_cors_max_age: '3600'
        barong_api_cors_allow_credentials: 'false'
        rails_max_threads: '20'
        barong_storage_provider: <%= @config['storage']['provider'] %>
        barong_storage_bucket_name: <%= @config['storage']['bucketName'] %>
        barong_storage_endpoint: <%= @config['storage']['endpoint'] %>
        barong_storage_signature_version: "<%= @config['storage']['signatureVersion'] %>"
        barong_storage_region: <%= @config['storage']['region'] %>
        barong_event_api_rabbitmq_host: rabbitmq
        barong_event_api_jwt_algorithm: RS256
        barong_event_api_rabbitmq_port: '5672'
        barong_smtp_host: <%= @config['smtp']['host'] %>
        barong_smtp_port: "<%= @config['smtp']['port'] %>"
        barong_captcha: <%= @config['captcha']['type'] %>
        barong_password_min_entropy: '14'
        barong_password_use_dictionary: 'false'
        barong_csrf_protection: '<%= @config['csrfEnabled'] %>'
        jwt_public_key: <%= @barong_public_key %>
      secret:
        jwt_private_key_path: /secrets/barong.key
        barong_vault_app_name: <%= @config['app']['name'].downcase %>
        barong_vault_address: http://vault:8200
        barong_vault_token: <%= @config['vault']['token'] %>
        database_name: barong_production
        barong_redis_url: redis://redis:6379
        redis_url: redis://redis:6379
        <%- if @config['kyc']['provider'] == 'kycaid' -%>
        barong_kycaid_authorization_token: <%= @config['kyc']['authorization_token'] %>
        <%- end -%>
        barong_event_api_rabbitmq_username: guest
        barong_smtp_password: <%= @config['smtp']['password'] %>
        <%- if @config['twilio']['enabled'] -%>
        barong_twilio_account_sid: <%= @config['twilio']['account_sid'] %>
        barong_twilio_auth_token: <%= @config['twilio']['auth_token'] %>
        barong_twilio_phone_number: <%= @config['twilio']['phone_number'] %>
        barong_phone_verification: twilio_sms
        <%- end -%>
        <%- if @config['captcha']['type'] == 'recaptcha' -%>
        barong_recaptcha_site_key: <%= @config['captcha']['siteKey'] %>
        barong_recaptcha_secret_key: <%= @config['captcha']['secretKey'] %>
        <%- elsif @config['captcha']['type'] == 'geetest' -%>
        barong_geetest_id: <%= @config['captcha']['siteKey'] %>
        barong_geetest_key: <%= @config['captcha']['secretKey'] %>
        <%- end -%>
        barong_storage_access_key: <%= @config['storage']['accessKey'] %>
        barong_storage_secret_key: <%= @config['storage']['secretKey'] %>
        barong_event_api_jwt_private_key: <%= @barong_private_key %>
        barong_event_api_rabbitmq_password: guest
        secret_key_base: faiba2shei0Ae5gahCh4aipoh3meyaFi

  sonic:
    scopes:
      public: {}
      private:
        peatio_url: http://peatio:8000
        barong_url: http://barong:8001
        database_name: sonic
        jwt_issuer: barong
        jwt_algo: RS256
        vault_addr: http://vault:8200
        deployment_id: <%= @config['app']['name'].downcase %>
      secret:
        vault_token: <%= @config['vault']['token'] %>
        jwt_private_key: <%= @barong_private_key %>

  peatio:
    scopes:
      public: {}
      private:
        log_level: warn
        port: '8000'
        <%- if @config['database']['adapter'] == 'postgresql' -%>
        database_collation: ""
        database_adapter: postgresql
        <%- elsif @config['database']['adapter'] == 'mysql' -%>
        database_adapter: mysql2
        <%- end -%>
        rails_root: /home/app
        url_host: <%= @config['app']['subdomain'] %>.<%= @config['app']['domain'] %>
        admin: admin@barong.io
        database_name: peatio_production
        redis_url: redis://redis:6379
        rabbitmq_host: rabbitmq
        markets_config: /opt/peatio/config/seed/markets.yml
        currencies_config: /opt/peatio/config/seed/currencies.yml
        management_api_v1_config: /opt/peatio/config/management_api_v1.yml
        jwt_audience: peatio,barong
        jwt_public_key: <%= @barong_public_key %>
        influxdb_host: influxdb
        event_api_jwt_algorithm: RS256
        event_api_rabbitmq_port: '5672'
        minimum_member_level_for_deposit: '1'
        minimum_member_level_for_withdraw: '3'
        minimum_member_level_for_trading: '2'
        force_secure_connection: 'false'
      secret:
        jwt_private_key: <%= @barong_private_key %>
        event_api_rabbitmq_username: guest
        event_api_rabbitmq_password: guest
        secret_key_base: faiba2shei0Ae5gahCh4aipoh3meyaFi
        vault_token: <%= @config['vault']['token'] %>
